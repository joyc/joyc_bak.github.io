<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="redis, ubuntu," />










<meta name="description" content="Ubuntu18.04中安装Redis准备工作 先对系统的依赖环境进行更新  12$ sudo apt-get update$ sudo apt-get upgrade  安装Redis  1234567$ sudo apt-get install redis-server# 如果需要安装成服务的话执行$ sudo systemctl enable redis-server.service# 确认">
<meta name="keywords" content="redis, ubuntu">
<meta property="og:type" content="article">
<meta property="og:title" content="Ubuntu18.04下的Redis常用操作">
<meta property="og:url" content="http://hython.com/2018/05/26/redis-ubuntu1804/index.html">
<meta property="og:site_name" content="Hython Note">
<meta property="og:description" content="Ubuntu18.04中安装Redis准备工作 先对系统的依赖环境进行更新  12$ sudo apt-get update$ sudo apt-get upgrade  安装Redis  1234567$ sudo apt-get install redis-server# 如果需要安装成服务的话执行$ sudo systemctl enable redis-server.service# 确认">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/383-2d3f11309ca60e1f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2018-05-26T14:57:07.990Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ubuntu18.04下的Redis常用操作">
<meta name="twitter:description" content="Ubuntu18.04中安装Redis准备工作 先对系统的依赖环境进行更新  12$ sudo apt-get update$ sudo apt-get upgrade  安装Redis  1234567$ sudo apt-get install redis-server# 如果需要安装成服务的话执行$ sudo systemctl enable redis-server.service# 确认">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/383-2d3f11309ca60e1f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://hython.com/2018/05/26/redis-ubuntu1804/"/>





  <title>Ubuntu18.04下的Redis常用操作 | Hython Note</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hython Note</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">嗨森 Learning Python</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hython.com/2018/05/26/redis-ubuntu1804/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hython">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hython Note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Ubuntu18.04下的Redis常用操作</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-26T12:15:01+09:00">
                2018-05-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Ubuntu18-04中安装Redis"><a href="#Ubuntu18-04中安装Redis" class="headerlink" title="Ubuntu18.04中安装Redis"></a>Ubuntu18.04中安装Redis</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ol>
<li><p>先对系统的依赖环境进行更新</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装Redis</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install redis-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要安装成服务的话执行</span></span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> redis-server.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认安装的版本</span></span><br><span class="line">$ redis-server -v</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="启动和停止"><a href="#启动和停止" class="headerlink" title="启动和停止"></a>启动和停止</h3><p>默认情况下直接在终端输入<code>redis-server</code>即可临时性启动Redis服务，再新开终端输入<code>redis-cli</code>启动客户端连接。</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ redis-server       # 启动服务</span><br><span class="line">$ redis-cli          # 启动客户端</span><br><span class="line">$ redis-cli shutdown # 关闭服务</span><br></pre></td></tr></table></figure>
</code></pre><p>如果出现以上命令无法关闭<code>redis-server</code>的情况下解决办法如下：</p>
<ul>
<li><p>使用以下命令启动重启和关闭</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/init.d/redis-server stop     # 停止</span><br><span class="line">$ /etc/init.d/redis-server start    # 启动</span><br><span class="line">$ /etc/init.d/redis-server restart  # 重启</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>我的安装情况是默认安装后保护模式和后台启动模式均为开启状态，根据需要配置为关闭。<br>查看下面的<strong>简单配置</strong>。</li>
</ul>
<h3 id="查看进程状态以及强制停止"><a href="#查看进程状态以及强制停止" class="headerlink" title="查看进程状态以及强制停止"></a>查看进程状态以及强制停止</h3><p>Linux命令来查看和杀掉进程来强制关闭服务。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ps aux | grep &quot;redis&quot;</span><br><span class="line">$ sudo pkill pid</span><br></pre></td></tr></table></figure>
<h3 id="连接测试"><a href="#连接测试" class="headerlink" title="连接测试"></a>连接测试</h3><p>直接输入<code>redis-cli</code>通过默认客户端来测试连接，正常情况下返回<code>ping</code>的对应值<code>PONG</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli</span><br><span class="line"></span><br><span class="line">$ 127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line">$ 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<h3 id="简单配置"><a href="#简单配置" class="headerlink" title="简单配置"></a>简单配置</h3><p>通过编辑默认配置文件来初步简单配置，推荐<code>copy</code>并重命名配置文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>
<p>打开远程连接并关闭保护模式，否则只允许本地连接：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 把以下注释掉（前面加#）</span><br><span class="line">bind 127.0.0.1 ::1</span><br><span class="line"># 以下改为 yes → no</span><br><span class="line">protected-mode no</span><br><span class="line"></span><br><span class="line"># 如果需要，设置验证密码</span><br><span class="line">requirepass YOURPASSPHRASE</span><br></pre></td></tr></table></figure>
<p>以上设置也可以通过客户端设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG SET requirepass YOURPASSPHRASE</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; AUTH YOURPASSPHRASE</span><br><span class="line">Ok</span><br></pre></td></tr></table></figure>
<p>设置密码后的连接方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -h 127.0.0.1 -p 6379 -a YOURPASSPHRASE  #其他参数如未改动则可省略</span><br></pre></td></tr></table></figure>
<p>保存后重启服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service redis-server restart</span><br></pre></td></tr></table></figure>
<p>如果需要更改内存的限制可以进行以下设置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">maxmemory 256mb</span><br><span class="line">maxmemory-policy allkeys-lru</span><br></pre></td></tr></table></figure>
<p>设置后需要重启redis服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl restart redis-server.service</span><br></pre></td></tr></table></figure>
<h2 id="Mac下的RedisDesktopManager管理工具"><a href="#Mac下的RedisDesktopManager管理工具" class="headerlink" title="Mac下的RedisDesktopManager管理工具"></a>Mac下的RedisDesktopManager管理工具</h2><p>由于Win版是可以免费下载，Mac和Ubuntu版本如果想免费试用是需下载源码编译的，<br>这里放出编译后的最新版本：</p>
<blockquote>
<p>百度盘：<br><a href="https://pan.baidu.com/s/13AF0rY5l_LYmZnb4AJdgNw" target="_blank" rel="noopener">https://pan.baidu.com/s/13AF0rY5l_LYmZnb4AJdgNw</a></p>
</blockquote>
<h2 id="连接不上的问题解决"><a href="#连接不上的问题解决" class="headerlink" title="连接不上的问题解决"></a>连接不上的问题解决</h2><p>我本地首次使用Mac的rdm来连接时出现以下问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2018-05-26 10:11:42 : Connection: Cancel running commands</span><br><span class="line">2018-05-26 10:11:42 : Connection: Disconnect on error: Connection error: Connection refused</span><br><span class="line">2018-05-26 10:15:26 : Connection: mac-ubuntu &gt; connection failed</span><br><span class="line">2018-05-26 11:14:19 : Connection: AUTH</span><br><span class="line">2018-05-26 11:14:19 : Connection: mac-ubuntu &gt; connected</span><br><span class="line">2018-05-26 11:14:19 : Connection: mac-ubuntu &gt; Response received : -DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command &apos;CONFIG SET protected-mode no&apos; from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to &apos;no&apos;, and then restarting the server. 3) If you started the server manually just for testing, restart it with the &apos;--protected-mode no&apos; option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.</span><br></pre></td></tr></table></figure>
<p>通过设置以上的简单设置开启本地连接并关闭保护模式重启服务后解决此问题。<br>以下是爬取flask官方文档后的保存数据的截图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/383-2d3f11309ca60e1f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="成功存入Redis"></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/redis-ubuntu/" rel="tag"># redis, ubuntu</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/23/install-mongodb/" rel="next" title="Mac和Ubuntu18.04下MongoDB的安装">
                <i class="fa fa-chevron-left"></i> Mac和Ubuntu18.04下MongoDB的安装
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Hython</p>
              <p class="site-description motion-element" itemprop="description">想啥说啥</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Ubuntu18-04中安装Redis"><span class="nav-number">1.</span> <span class="nav-text">Ubuntu18.04中安装Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#准备工作"><span class="nav-number">1.1.</span> <span class="nav-text">准备工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动和停止"><span class="nav-number">1.2.</span> <span class="nav-text">启动和停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看进程状态以及强制停止"><span class="nav-number">1.3.</span> <span class="nav-text">查看进程状态以及强制停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连接测试"><span class="nav-number">1.4.</span> <span class="nav-text">连接测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简单配置"><span class="nav-number">1.5.</span> <span class="nav-text">简单配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac下的RedisDesktopManager管理工具"><span class="nav-number">2.</span> <span class="nav-text">Mac下的RedisDesktopManager管理工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接不上的问题解决"><span class="nav-number">3.</span> <span class="nav-text">连接不上的问题解决</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hython</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
